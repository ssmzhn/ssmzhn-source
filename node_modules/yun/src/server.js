/**
 * @author human.hjh
 * @created 15/9/14
 */

var webpack = require('webpack');
var WebpackDevServer = require('webpack-dev-server');

var exec = require('child_process').exec;

module.exports.start = function(port) {
	var config = require('./webpack.config');

	var server = new WebpackDevServer(webpack(config), {
		publicPath: config.output.publicPath,
		hot: true,
		historyApiFallback: true,
		colors: true,
		noInfo: true
	});

	server.listen(port, 'localhost', function (err, result) {
			if (err) {
				console.log(err);
				return ;
			}

			console.log('Server Listening at localhost:' + port);

			var child = exec('open http://localhost:' + port,
				function (error, stdout, stderr) {
					if (error == null) {

					}
				});

		})
};

